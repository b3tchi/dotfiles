#!/bin/bash
description="
create item in azure keyvault
"
declare -A mandatory_args=(
  [name]="name of item inside keyvault"
)
declare -A optional_args=(
  [public]="look in shared keyvault"
)

main(){

  if [[ -z $public ]]; then
    gargs=(
      --subscription $KEYVAULT_0_SUBSCRIPTION
      --vault-name $KEYVAULT_0_NAME
    )
  else
    gargs=(
      --subscription $KEYVAULT_1_SUBSCRIPTION
      --vault-name $KEYVAULT_1_NAME
    )
  fi

  gargs+=(
    --name "$name" \
    --output tsv \
    --query 'value'
  )
  az keyvault secret show "${gargs[@]}"

}
